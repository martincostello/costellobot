@page "/github-webhook"
@model DebugModel
@{
    ViewData["Title"] = "Debug Webhook";
}
<div id="debug-content" app-id="@(Model.AppId)">
  <form action="#">
    <div class="form-group">
      <label for="webhook-event"><a href="https://docs.github.com/en/developers/webhooks-and-events/webhooks/webhook-events-and-payloads" target="_blank" rel="noopener">Event</a></label>
      <select id="webhook-event" class="form-control text-webhook" autofocus="autofocus" aria-label="Event" aria-describedby="webhook-event-help">
        <option value="check_suite">check_suite</option>
        <option value="deployment_status">deployment_status</option>
        <option value="installation">installation</option>
        <option value="pull_request" selected>pull_request</option>
        <option value="status">status</option>
      </select>
    </div>
    @if (Model.RequireSignature)
    {
      <div class="form-group">
        <label for="webhook-signature">Signature</label>
        <input id="webhook-signature" class="form-control" type="text" autocomplete="off" spellcheck="false">
      </div>
    }
    <div class="form-group">
      <label for="webhook-payload">Payload</label>
      @{
        string example = @"{
  ""action"": ""opened"",
  ""number"": 1,
  ""pull_request"": {
    ""url"": ""https://api.github.com/repos/octocat/Hello-World/pulls/1"",
    ""id"": 1,
    ""node_id"": ""MDY6Q29tbWl0MTgwMzkzMzA1"",
    ""html_url"": """"
  }
}";
      }
      <textarea id="webhook-payload" class="form-control form-payload text-webhook" placeholder="@(example)" rows="20" spellcheck="false" aria-describedby="webhook-payload-help"></textarea>
    </div>
    <button id="post-webhook" type="submit" class="btn btn-primary" disabled>
      POST
      <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
    </button>
    <span class="badge webhook-status d-none"></span>
  </form>
</div>
